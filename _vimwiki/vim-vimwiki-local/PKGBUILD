# Contributor: Johannes Dewender < arch at JonnyJD dot net >

pkgname=vim-vimwiki-local
pkgver=0
pkgrel=1
pkgdesc="Personal Wiki for Vim"
arch=('any')
url="http://code.google.com/p/vimwiki/"
license=('MIT')
groups=('vim-plugins')
depends=('vim')
makedepends=('mercurial')
conflicts=('vim-vimwiki')
provides=('vim-vimwiki')
install=vimdoc.install
source=(license.txt)
md5sums=('e19fa0689d06a724fc8ddfe824ef2680')

_localrepo=/home/jonnyjd/hg/vimwiki

build() {
  cd $_localrepo
  msg "Summary"
  hg summary 2> /dev/null
  msg "status"
  hg status 2> /dev/null
}

package() {
  install -d ${pkgdir}/usr/share/vim/vimfiles/autoload/vimwiki
  install -d ${pkgdir}/usr/share/vim/vimfiles/{doc,ftplugin}
  install -d ${pkgdir}/usr/share/vim/vimfiles/{plugin,syntax}

  cd ${pkgdir}/usr/share/vim/vimfiles
  ln -s $_localrepo/src/autoload/vimwiki/* autoload/vimwiki/
  for x in {ftplugin,plugin,syntax}; do
    ln -s $_localrepo/src/$x/* $x/
  done
  install -Dm644 ${srcdir}/license.txt \
    ${pkgdir}/usr/share/licenses/${pkgname}/license.txt
  ln -s $_localrepo/src/doc/vimwiki.txt doc/
}

# vim:set ts=2 sw=2 et:
