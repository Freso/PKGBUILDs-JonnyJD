# Contributor: Johannes Dewender  arch at JonnyJD dot net
pkgname=targetcli-fb
pkgver=2.0rc1.fb9
pkgrel=1
epoch=
pkgdesc="free branch of the targetcli lio administration shell"
arch=('any')
url="https://github.com/agrover/targetcli-fb"
license=('AGPL3')
groups=()
depends=('python2-rtslib-fb' 'lio-utils' 'python2-configshell')
optdepends=()
provides=('targetcli')
replaces=('rtsadmin')
backup=()
options=()
install=
source=($pkgname-$pkgver.tar.gz::https://github.com/agrover/$pkgname/tarball/v$pkgver)
md5sums=('0cddd3b6b79eb2e4a9fa2e6340abab81')

_githubname=agrover-targetcli-fb
_gitversion=953e1f9

build() {
  cd "$srcdir/$_githubname-$_gitversion"
  python2 setup.py build
}

package() {
  cd "$srcdir/$_githubname-$_gitversion"
  python2 setup.py install --skip-build --root="$pkgdir/" --optimize=1

  install -d "$pkgdir/usr/share/man/man8"
  gzip -c targetcli.8 > "$pkgdir/usr/share/man/man8/targetcli.8.gz"
}

# vim:set ts=2 sw=2 et:
